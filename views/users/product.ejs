

<style>
    
    /* Equal height for product widgets */
    .product-widget {
        display: flex;
        flex-direction: column;
        /* height: 100%; Ensure the widgets take the full height */
    }

    /* Adjust margins and spacing */
    .section {
        margin-bottom: 30px;
    }

    /* Ensure product items have equal height and proper alignment */
    .product-item {
        display: flex;
        flex-direction: column;
        height: 60%; /* Ensure product items take the full height */
    }
</style>

<%-include('../layout/header.ejs')%>

<%-include('../layout/navigation.ejs')%>


<!-- BREADCRUMB -->
<div id="breadcrumb" class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <ul class="breadcrumb-tree">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">All Categories</a></li>
                    <li><a href="#">Accessories</a></li>
                    <li class="active">Headphones (227,490 Results)</li>
                </ul>
            </div>
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /BREADCRUMB -->

<!-- SECTION -->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <!-- ASIDE -->
            <div id="aside" class="col-md-3">
                <!-- aside Widget -->
                <div class="aside">
                    <h3 class="aside-title">Categories</h3>
                    <% categoryData.forEach((category, index) =>{%>
                    <div class="checkbox-filter">
                        <div class="input-checkbox">
                            <input type="checkbox" id="category-<%=index+1%>">
                            <label for="category-<%=index+1%>">
                                <span></span>
                                <%=category.categoryName%>
                                <!-- <small>(120)</small> -->
                            </label>
                        </div>
                    </div>
                    <% }); %>
                </div>
                <!-- /aside Widget -->

                <!-- aside Widget -->
                <div class="aside">
                    <h3 class="aside-title">Price</h3>
                    <div class="price-filter">
                        <div id="price-slider"></div>
                        <div class="input-number price-min">
                            <input id="price-min" type="number">
                            <span class="qty-up">+</span>
                            <span class="qty-down">-</span>
                        </div>
                        <span>-</span>
                        <div class="input-number price-max">
                            <input id="price-max" type="number">
                            <span class="qty-up">+</span>
                            <span class="qty-down">-</span>
                        </div>
                    </div>
                </div>
                <!-- /aside Widget -->

                <!-- aside Widget -->
                <div class="aside">
                    <h3 class="aside-title">Brand</h3>
                    <% brandData.forEach((brand, index)=>{%>
                    <div class="checkbox-filter">
                        <div class="input-checkbox">
                            <input type="checkbox" id="brand-<%=index+1%>" class="brand-checkbox">
                            <label for="brand-<%=index+1%>">
                                <span></span>
                                <%=brand.brandName%>
                                <!-- <small>(578)</small> -->
                            </label>
                        </div>
                    </div>
                    <%})%>
                </div>
                <!-- /aside Widget -->

                <!-- aside Widget -->
                <div class="aside">
                    <h3 class="aside-title">Top selling</h3>
                    <div class="product-widget">
                        <div class="product-img">
                            <img src="./images/Focus-Light.webp" alt="">
                        </div>
                        <div class="product-body">
                            <p class="product-category">Category</p>
                            <h3 class="product-name"><a href="#">Focus Light</a></h3>
                            <h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
                        </div>
                    </div>

                    <div class="product-widget">
                        <div class="product-img">
                            <img src="./images/LED-lights.jpg" alt="">
                        </div>
                        <div class="product-body">
                            <p class="product-category">Category</p>
                            <h3 class="product-name"><a href="#">LED Lights</a></h3>
                            <h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
                        </div>
                    </div>

                    <div class="product-widget">
                        <div class="product-img">
                            <img src="./images/MCB 2.webp" alt="">
                        </div>
                        <div class="product-body">
                            <p class="product-category">Category</p>
                            <h3 class="product-name"><a href="#">MCB</a></h3>
                            <h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
                        </div>
                    </div>
                </div>
                <!-- /aside Widget -->
            </div>
            <!-- /ASIDE -->

            <!-- STORE -->
            <div id="store" class="col-md-9">
                <!-- store top filter -->
                <div class="store-filter clearfix">
                    <div class="store-sort">
                        <label>
                            Sort By:
                            <select class="input-select">
                                <option value="0">Popular</option>
                                <option value="1">Position</option>
                            </select>
                        </label>

                        <label>
                            Show:
                            <select class="input-select">
                                <option value="0">20</option>
                                <option value="1">50</option>
                            </select>
                        </label>
                    </div>
                    <ul class="store-grid">
                        <li class="active"><i class="fa fa-th"></i></li>
                        <li><a href="#"><i class="fa fa-th-list"></i></a></li>
                    </ul>
                </div>
                <!-- /store top filter -->

                <!-- store products -->
                <div class="row">
                    <!-- product -->
                    <% productData.forEach(product=> {%>
                    <div class="col-md-4 col-xs-6 product-item" data-brand="<%= product.brandName %>" >
                        <div class="product">
                            <div class="product-img">
                                <% if(product.image.length >0) {%>
                                <img src="/adminAssets/images/<%=product.image[0]%>" alt="">
                                <% };%>
                                <div class="product-label">
                                    <span class="sale">-30%</span>
                                    <span class="new">NEW</span>
                                </div>
                            </div>
                            <div class="product-body">
                                <p class="product-category"><%=product.category%></p>
                                <p class="product-brand warning"><%=product.brandName%></p>
                                <h3 class="product-name"><a href="#"><%=product.name%></a></h3>
                                <h4 class="product-price">&#x20B9;<%=product.price%>
                                    <!-- <del class="product-old-price">$990.00</del></h4> -->
                                <div class="product-rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                </div>
                                <div class="product-btns">
                                    <button class="add-to-wishlist"><i class="fa fa-heart-o"></i><span class="tooltipp">add to wishlist</span></button>
                                    <button class="add-to-compare"><i class="fa fa-exchange"></i><span class="tooltipp">add to compare</span></button>
                                    <button class="quick-view"><i class="fa fa-eye"></i><span class="tooltipp">quick view</span></button>
                                </div>
                            </div>
                            <div class="add-to-cart">
                                <button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
                            </div>
                        </div>
                    </div>
                    <% }); %>
                    <!-- /product -->
                </div>
                <!-- /store products -->

                <!-- store bottom filter -->
                <div class="store-filter clearfix">
                    <span class="store-qty">Showing 20-100 product</span>
                    <ul class="store-pagination">
                        <li class="active">1</li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#"><i class="fa fa-angle-right"></i></a></li>
                    </ul>
                </div>
                <!-- /store bottom filter -->
            </div>
            <!-- /STORE -->
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /SECTION -->

<!-- NEWSLETTER -->
<div id="newsletter" class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <div class="newsletter">
                    <p>Sign Up for the <strong>NEWSLETTER</strong></p>
                    <form>
                        <input class="input" type="email" placeholder="Enter Your Email">
                        <button class="newsletter-btn"><i class="fa fa-envelope"></i> Subscribe</button>
                    </form>
                    <ul class="newsletter-follow">
                        <li>
                            <a href="#"><i class="fa fa-facebook"></i></a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-instagram"></i></a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-pinterest"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /NEWSLETTER -->
<%-include('../layout/footer.ejs')%>


<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script>
    $(document).ready(function () {
        // Store the initial state of products
        const initialProducts = $('.product-item');

        // Attach a click event handler to brand checkboxes
        $('.brand-checkbox').on('change', function () {
            updateProductDisplay();
        });

        // Attach a click event handler to category checkboxes
        $('[id^="category-"]').on('change', function () {
            updateProductDisplay();
        });

        // Function to update the product display based on selected filters
        function updateProductDisplay() {
            // Get the selected brands
            const selectedBrands = $('.brand-checkbox:checked').map(function () {
                return $(this).siblings('label').text().trim();
            }).get();

            // Get the selected categories
            const selectedCategories = $('[id^="category-"]:checked').map(function () {
                return $(this).siblings('label').text().trim();
            }).get();

            // Filter products based on selected brands and categories
            if (selectedBrands.length > 0 || selectedCategories.length > 0) {
                initialProducts.hide();

                selectedBrands.forEach(function (brand) {
                    $(`.product-item[data-brand="${brand}"]`).show();
                });

                selectedCategories.forEach(function (category) {
                    $(`.product-category:contains("${category}")`).closest('.product-item').show();
                });
            } else {
                // If no filters selected, show all products
                initialProducts.show();
            }
        }
    });
</script>


